write_system_prompt:
  You are an ambitious AI PhD student who is looking to publish a paper that will contribute significantly to the field.
  You have already figured out the research idea and the experiments you want to run.
  Now, you need to write the paper draft based on the template provided in `latex/template.tex`.

section_tips:
  Abstract: |
    - TL;DR of the paper
    - What are we trying to do and why is it relevant?
    - Why is this hard?
    - How do we solve it (i.e. our contribution!)
    - How do we verify that we solved it (e.g. Experiments and results)

    Please make sure the abstract reads smoothly and is well-motivated. This should be one continuous paragraph with no breaks between the lines.

  Introduction: |
    - Longer version of the Abstract, i.e. of the entire paper
    - What are we trying to do and why is it relevant?
    - Why is this hard?
    - How do we solve it (i.e. our contribution!)
    - How do we verify that we solved it (e.g. Experiments and results)
    - New trend: specifically list your contributions as bullet points
    - Extra space? Future work!

  Related Work: |
    - Academic siblings of our work, i.e. alternative attempts in literature at trying to solve the same problem.
    - Goal is to "Compare and contrast" - how does their approach differ in either assumptions or method? If their method is applicable to our Problem Setting I expect a comparison in the experimental section. If not, there needs to be a clear statement why a given method is not applicable.
    - Note: Just describing what another paper is doing is not enough. We need to compare and contrast.

  Background: |
    - Academic Ancestors of our work, i.e. all concepts and prior work that are required for understanding our method.
    - Usually includes a subsection, Problem Setting, which formally introduces the problem setting and notation (Formalism) for our method. Highlights any specific assumptions that are made that are unusual.
    - Note: If our paper introduces a novel problem setting as part of its contributions, it's best to have a separate Section.

  Method: |
    - What we do. Why we do it. All described using the general Formalism introduced in the Problem Setting and building on top of the concepts / foundations introduced in Background.

  Experimental Setup: |
    - How do we test that our stuff works? Introduces a specific instantiation of the Problem Setting and specific implementation details of our Method for this Problem Setting.
    - Do not imagine unknown hardware details.
    - Includes a description of the dataset, evaluation metrics, important hyperparameters, and implementation details.

  Results: |
    - Shows the results of running Method on our problem described in Experimental Setup.
    - Includes statements on hyperparameters and other potential issues of fairness.
    - Only includes results that have actually been run and saved in the logs. Do not hallucinate results that don't exist.
    - If results exist: compares to baselines and includes statistics and confidence intervals.
    - If results exist: includes ablation studies to show that specific parts of the method are relevant.
    - Discusses limitations of the method.
    - Make sure to include all the results from the experiments, and include all relevant figures.

  Conclusion: |
    - Brief recap of the entire paper.
    - To keep going with the analogy, you can think of future work as (potential) academic offspring.

error_list: |
  - Unenclosed math symbols
  - Only reference figures that exist in our directory
  - LaTeX syntax errors
  - Numerical results that do not come from explicit experiments and logs
  - Repeatedly defined figure labels
  - References to papers that are not in the .bib file, DO NOT ADD ANY NEW CITATIONS!
  - Unnecessary verbosity or repetition, unclear text
  - Results or insights in the notes.txt that have not yet been included
  - Any relevant figures that have not yet been included in the text
  - Improper closing of environments (e.g., use \end{figure} for \begin{figure})
  - Duplicate headers (e.g., multiple \section{Introduction})
  - Unescaped special characters (e.g., use shakespeare\_char instead of shakespeare_char)
  - Incorrect closing of environments (e.g., </end{figure}> instead of \end{figure})

refinement_prompt: |
  Great job! Now, please review and refine only the {section} you just wrote.
  Your output must consist solely of valid LaTeX code for the {section}—no additional commentary, markdown, or annotations are allowed.
  Do not include any extra explanatory text, headers, or markdown formatting. Ensure that the output is a complete, self-contained LaTeX section.

  Pay particular attention to fixing any errors such as:
  {error_list}

  Here is the section to refine:
  """
  {section_content}
  """

second_refinement_prompt: |
  Please review and further refine the {section} to ensure it integrates seamlessly with the full paper.
  Your output must be valid LaTeX code for the {section} only, with no extraneous annotations, markdown formatting, or commentary.
  Focus on eliminating redundancies, improving conciseness, and correcting any remaining syntax errors.
  Do not output any text beyond the LaTeX code needed for the refined section.

  Recall the following guidance:
  {tips}

  Also, address the following errors:
  {error_list}

  --- Full Draft for Context ---
  """
  {full_draft}
  """

  --- Section to Refine ---
  """
  {section_content}
  """

citation_system_prompt: |
  You are an ambitious AI PhD student who is looking to publish a paper that will contribute significantly to the field.
  You have already written an initial draft of the paper and now you are looking to add missing citations to related papers throughout the paper.
  The related work section already has some initial comments on which papers to add and discuss.

  Focus on completing the existing write-up and do not add entirely new elements unless necessary.
  Ensure every point in the paper is substantiated with sufficient evidence.
  Feel free to add more cites to a particular point if there is only one or two references.
  Ensure no paper is cited without a corresponding reference in the `references.bib` file.
  Ensure each paragraph of the related work has sufficient background, e.g. a few papers cited.
  You will be given access to the Semantic Scholar API, only add citations that you have found using the API.
  Aim to discuss a broad range of relevant papers, not just the most popular ones.
  Make sure not to copy verbatim from prior literature to avoid plagiarism.

  You will be prompted to give a precise description of where and how to add the cite, and a search query for the paper to be cited.
  Finally, you will select the most relevant cite from the search results (top 10 results will be shown).
  You will have {total_rounds} rounds to add to the references, but do not need to use them all.

  DO NOT ADD A CITATION THAT ALREADY EXISTS!

citation_first_prompt: |
  Round {current_round}/{total_rounds}:

  You have written this LaTeX draft so far:

  """
  {draft}
  """

  Identify the most important citation that you still need to add, and the query to find the paper.

  Respond in the following format:

  THOUGHT:
  <THOUGHT>

  RESPONSE:
  ```json
  <JSON>
  ```

  In <THOUGHT>, first briefly reason over the paper and identify where citations should be added.
  If no more citations are needed, add "No more citations needed" to your thoughts.
  Do not add "No more citations needed" if you are adding citations this round.

  In <JSON>, respond in JSON format with the following fields:
  - "Description": A precise description of the required edit, along with the proposed text and location where it should be made.
  - "Query": The search query to find the paper (e.g. attention is all you need).

  Ensure the description is sufficient to make the change without further context. Someone else will make the change.
  The query will work best if you are able to recall the exact name of the paper you are looking for, or the authors.
  This JSON will be automatically parsed, so ensure the format is precise.

citation_second_prompt: |
  Search has recovered the following articles:

  {papers}

  Respond in the following format:

  THOUGHT:
  <THOUGHT>

  RESPONSE:
  ```json
  <JSON>
  ```

  In <THOUGHT>, first briefly reason over the search results and identify which citation best fits your paper and the location is to be added at.
  If none are appropriate, add "Do not add any" to your thoughts.

  In <JSON>, respond in JSON format with the following fields:
  - "Selected": A list of the indices of the selected papers to be cited, e.g. "[0, 1]". Can be "[]" if no papers are selected. This must be a string.
  - "Description": Update the previous description of the required edit if needed. Ensure that any cites precisely match the name in the bibtex!!!

  Do not select papers that are already in the `references.bib` file at the top of the draft, or if the same citation exists under a different name.
  This JSON will be automatically parsed, so ensure the format is precise.

abstract_prompt: |
  We've provided the `latex/template.tex` file to the project. We will be filling it in section by section.

  First, please fill in the "Title" and "Abstract" sections of the writeup.

  Some tips are provided below:
  {abstract_tips}

  Here is the research idea that the paper is based on:

  **Title**:
  {title}

  **Research Problem**:
  What are the challenges in the current methods that this research aims to solve?

  **Proposed Experiment**:
  {experiment}

  **Key Contributions**:
  - Clearly state the unique contributions of this research.
  - Explain why this approach is novel compared to existing methods.
  - Mention any expected improvements over traditional techniques.

  Use this information to write a concise and well-structured abstract.

  Before every paragraph, please include a brief description of what you plan to write in that paragraph in a comment.

  Be sure to first name the file and use *SEARCH/REPLACE* blocks to perform these edits.

section_prompt:
  Introduction: |
    Please fill in the Introduction section of the writeup. Some tips are provided below:
    {section_tips}

    The **core idea** of this work is: **{title}**.

    The **motivation** behind this idea is: **{experiment}**.
    - Explain why this problem is important and relevant to the field.
    - Describe any limitations of existing approaches that this work aims to address.
    - Provide high-level intuition on why this method is expected to be beneficial.

    The key **contributions** of this work include:
    - Clearly outline 2-3 specific contributions of the paper.
    - Highlight how these contributions advance the field.

    Conclude the introduction with a **roadmap** of the paper:
    - Briefly summarize what each section of the paper covers.

    **Guidelines:**
    - Use `\cite` or `\citet` where relevant, referring only to works already in `references.bib`.
    - Do **not** introduce new citations that are not already included.
    - Before each paragraph, add a brief description of what you plan to write as a comment.
    - Use **SEARCH/REPLACE** blocks to perform these edits.

  Background: |
    Please fill in the Background section of the writeup. Some tips are provided below:
    {section_tips}

    The Background section should provide a clear foundation for understanding this work. Ensure that readers unfamiliar with this specific domain can grasp the key theoretical concepts, relevant prior work, and the problem setting.

    - Define key theoretical concepts required to understand the paper.
    - Discuss prior foundational work that the paper builds on.
    - If applicable, introduce relevant mathematical formulations and assumptions.

    Be sure to use \cite or \citet where relevant, referring to the works provided in the file.
    Do not cite anything that is not already in `references.bib`. Do not add any new entries to this.

    Before every paragraph, please include a brief description of what you plan to write in that paragraph in a comment.

    Be sure to first name the file and use *SEARCH/REPLACE* blocks to perform these edits.
    Keep the Background section concise and structured, ensuring it effectively establishes the foundation for the rest of the paper.

  Method: |
    Please fill in the Method section of the writeup. The Method section should **clearly define the approach taken in this study**, ensuring that readers can understand and, if needed, replicate the implementation. This section must be based on **both the proposed experiment and the provided code**.
    Some tips are provided below:
    {section_tips}

    - Describe the approach taken in this paper and why it was chosen.
    - If applicable, formalize the method mathematically.
    - Clearly define any novel techniques, modifications, or extensions.
    - Explain the algorithmic workflow and key implementation details.

    This section must be written based on the **provided code and experimental modifications**.
    The proposed experiment was: **{experiment}**.
    The implementation code was:

    ```python
    {code}
    ```

    Be sure to use \cite or \citet where relevant, referring to the works provided in the file.
    Do not cite anything that is not already in `references.bib`. Do not add any new entries to this.

    Before every paragraph, please include a brief description of what you plan to write in that paragraph in a comment.

    Be sure to first name the file and use *SEARCH/REPLACE* blocks to perform these edits.

  Experimental Setup: |
    Please fill in the Experimental Setup section of the writeup. This section should **clearly document how the experiments were conducted** so that they can be replicated by other researchers. The description should be based on the provided **implementation, dataset, and experimental configuration**.

    Some tips are provided below:
    {section_tips}

    - Describe the dataset(s) used for evaluation.
    - Specify key experimental settings, including hardware/software configurations.
    - Explain how hyperparameters were selected and tuned.
    - Detail evaluation metrics and baselines used for comparison.

    The experiments were run using the following method: **{experiment}**.
    The dataset, optimizer, and model settings are derived from the provided implementation.

    ```python
    {code}
    ```

    Be sure to use \cite or \citet where relevant, referring to the works provided in the file.
    Do not cite anything that is not already in `references.bib`. Do not add any new entries to this.

    Before every paragraph, please include a brief description of what you plan to write in that paragraph in a comment.

    Be sure to first name the file and use *SEARCH/REPLACE* blocks to perform these edits.

  Results: |
    Please fill in the Results section of the writeup. Some tips are provided below:
    {section_tips}

    - Present key experimental findings in a structured manner.
    - Use tables, figures, and confidence intervals to support conclusions.
    - Compare results against baselines and state-of-the-art methods.
    - Discuss error analysis, ablation studies, and potential limitations.

    All results must be based on the actual experiment execution logs.
    The baseline results were:
    **{baseline_results}**

    The obtained experimental results are:
    **{experiment_results}**

    Compare the experimental results to the baseline and analyze the differences. Specifically:
    - Highlight any performance improvements, if applicable.
    - Identify cases where performance degraded or was inconsistent.
    - Discuss possible reasons for improvements or degradations.
    - Provide statistical significance, error margins, or confidence intervals when possible.
    - If applicable, discuss the stability and convergence trends of the method.

    Ensure that all results presented have been obtained and are recorded in the logs.
    Do not hallucinate numerical results or make unverifiable claims.

    Be sure to use \cite or \citet where relevant, referring to the works provided in the file.
    Do not cite anything that is not already in `references.bib`. Do not add any new entries to this.

    Before every paragraph, please include a brief description of what you plan to write in that paragraph in a comment.

    Be sure to first name the file and use *SEARCH/REPLACE* blocks to perform these edits.

  Conclusion: |
    Please fill in the Conclusion section of the writeup. Some tips are provided below:
    {section_tips}

    - Summarize the key contributions and findings of the paper.
    - Reflect on the broader impact of this work.
    - Highlight potential future research directions.

    The proposed experiment was **{experiment}**.
    Summarize its findings based on the results section and highlight its importance.

    Keep the conclusion concise and ensure it aligns with the claims made throughout the paper.

    Be sure to use \cite or \citet where relevant, referring to the works provided in the file.
    Do not cite anything that is not already in `references.bib`. Do not add any new entries to this.

    Before every paragraph, please include a brief description of what you plan to write in that paragraph in a comment.

    Be sure to first name the file and use *SEARCH/REPLACE* blocks to perform these edits.

related_work_prompt: |
  Please fill in the Related Work of the writeup. Some tips are provided below:

  {related_work_tips}

  - Discuss prior foundational works that are relevant to this research.
  - Compare and contrast alternative approaches and their limitations.
  - Highlight gaps in existing literature that justify the need for this study.
  - Ensure that prior works align with the **motivation** of this research, but do NOT discuss specific details of the experiment.

  The motivation for this study is: **{experiment}**.
  This work aims to address the gaps in previous approaches by providing a new perspective.

  For this section, very briefly sketch out the structure of the section, and clearly indicate what papers you intend to include.
  Do this all in LaTeX comments using %.
  The related work should be concise, only plan to discuss the most relevant work.
  Do not modify `references.bib` to add any new citations, this will be filled in at a later stage.

  Be sure to first name the file and use *SEARCH/REPLACE* blocks to perform these edits.

title_refinement_prompt: |
  Great job! Now that there is a complete draft of the entire paper, let's refine each section again.
  Here is the current paper draft:
  {full_draft}

  Please provide a single, concise title that clearly reflects the paper's concept.
  Do not include any additional text, explanation, or formatting – output only the title.

citation_aider_format: |
  The following citations have just been added to the end of the `references.bib` file definition at the top of the file:
  """
  {bibtex}
  """
  You do not need to add them yourself.
  ABSOLUTELY DO NOT ADD IT AGAIN!!!

  Make the proposed change to the draft incorporating these new cites:
  {description}

  Use your judgment for whether these should be cited anywhere else.
  Make sure that any citation precisely matches the name in `references.bib`. Change its name to the correct name in the bibtex if needed.
  Ensure the citation is well-integrated into the text.
  You must use \cite or \citet to reference papers, do not manually type out author names.
